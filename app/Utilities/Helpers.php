<?php

use Carbon\Carbon;
use Morilog\Jalali\Facades\jDateTime;

if (!function_exists('toJalali')) {
    function toJalali($time, $format = 'Y/m/d H:i:s')
    {
        return unConvertNumber(jDateTime::strftime($format, strtotime($time)));
    }
}

if (!function_exists('numberConvert')) {
    function numberConvert($number)
    {
        return (int)str_replace(',', '', $number);
    }
}

if (!function_exists('toGregorian')) {
    function toGregorian($time, $format = 'Y/m/d H:i:s')
    {
        return jDatetime::createDatetimeFromFormat($format, convertNumber($time));
    }
}
if (!function_exists('diffDate')) {
    function diffDate($time, $format = "%y year %m  month %d day", $by = 'now')
    {
        $date = Carbon::parse($time);
        if ($by) {
            $date_diff = Carbon::parse($by);
        } else {
            $date_diff = Carbon::now();
        }

        $diff = $date->diff($date_diff)->format($format);

        return $diff;
    }
}

if (!function_exists('persianTime')) {
    function persianTime($time)
    {
        $today = date("Y-m-d", mktime(0, 0, 0, date("m"), date("d"), date("Y")));
        $yesterday = date("Y-m-d", mktime(0, 0, 0, date("m"), date("d") - 1, date("Y")));
        $tomorrow = date("Y-m-d", mktime(0, 0, 0, date("m"), date("d") + 1, date("Y")));
        $time_date = date("Y-m-d", strtotime($time));
        if ($today == $time_date) {
            return 'Ø§Ù…Ø±ÙˆØ² ' . unConvertNumber(date("H:i", strtotime($time)));
        } elseif ($yesterday == $time_date) {
            return 'Ø¯ÛŒØ±ÙˆØ² ' . unConvertNumber(date("H:i", strtotime($time)));
        } elseif ($tomorrow == $time_date) {
            return 'ÙØ±Ø¯Ø§ ' . unConvertNumber(date("H:i", strtotime($time)));
        } else {
            $date = unConvertNumber(jDate::forge($time_date)->format('%y/%m/%d'));
            $date .= ' - ' . unConvertNumber(date("H:i", strtotime($time)));
            return $date;
        }
    }
}

if (!function_exists('persianTimeColor')) {
    function persianTimeColor($time)
    {
        $now = Carbon::now();
        if ($now <= $time) {
            return 'green';
        } else {
            return 'red';
        }
    }
}

if (!function_exists('arabicToPersian')) {
    function arabicToPersian($str)
    {
        $arabic = array('Ù ', 'Ù¡', 'Ù¢', 'Ù£', 'Ù¤', 'Ù¥', 'Ù¦', 'Ù§', 'Ù¨', 'Ù©', 'ÙŠ', 'Ùƒ');
        $persian = array('Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'ÛŒ', 'Ú©');
        return str_replace($arabic, $persian, $str);
    }
}

if (!function_exists('convertNumber')) {
    function convertNumber($value)
    {
        $western = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
        $eastern = ['Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'Û°'];
        return str_replace($eastern, $western, $value);
    }
}

if (!function_exists('unConvertNumber')) {
    function unConvertNumber($value)
    {
        $western = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
        $eastern = ['Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'Û°'];
        return str_replace($western, $eastern, $value);
    }
}

if (!function_exists('persianConvert')) {
    function persianConvert($string, $separator = '-')
    {
        $_transliteration = array(
            '/Ø†|Ø‡|Øˆ|Ø‰|ØŠ|Ø|ØŽ|Ø|Ø‘|Ø’|Ø“|Ø”|Ø•|Ø–|Ø˜|Ø™|Øš|Øž|Ù–|Ù—|Ù˜|Ù™|Ùš|Ù›|Ùœ|Ù|Ùž|ÙŸ|Ùª|Ù¬|Ù­|Û|Û‚|Ûƒ|Û”|Û–|Û—|Û˜|Û™|Ûš|Û›|Ûœ|Ûž|ÛŸ|Û |Û¡|Û¢|Û£|Û¤|Û¥|Û¦|Û§|Û¨|Û©|Ûª|Û«|Û¬|Û­|Û¯|ï®§|ï®²|ï®³|ï®´|ï®µ|ï®¶|ï®·|ï®¸|ï®¹|ï®º|ï®»|ï®¼|ï®½|ï®¾|ï®¿|ï¯€|ï¯|ï±ž|ï±Ÿ|ï± |ï±¡|ï±¢|ï±£|ï¹°|ï¹±|ï¹²|ï¹³|ï¹´|ï¹¶|ï¹·|ï¹¸|ÙŒ|Ù|ï¹¸|ï¹¹|Ù’|ï¹º|ï¹»|ï¹¼|Ù‹|Ù|Ù|ÙŽ|Ù‘|\]|\[|\}|\{|\||Ù“|Ù°|â€Œ|Ù”|Ø¡|ï¹¾|ï¹¿/' => '',
            '/Ø£|Ø¥|Ù±|Ù²|Ù³|Ùµ|Ý³|Ý´|ï­|ï­‘|ïºƒ|ïº„|ïº‡|ïºˆ|ïº|ïºŽ|ðžº€|ï´¼|ï´½|ðž¸€|Ø¥|Ø£|Ø¢/' => 'Ø§',
            '/Ù®|Ý•|Ý–|ï­’|ï­“|ï­”|ï­•|ïº|ïº|ïº‘|ïº’|ðž¸|ðž¸œ|ðž¸¡|ðž¹¡|ðž¹¼|ðžº|ðžº¡/' => 'Ø¨',
            '/Ú€|Ý|Ý”|ï­–|ï­—|ï­˜|ï­™|ï­š|ï­›|ï­œ|ï­/' => 'Ù¾',
            '/Ù¹|Ùº|Ù»|Ù¼|Ý“|ï­ž|ï­Ÿ|ï­ |ï­¡|ï­¢|ï­£|ï­¤|ï­¥|ï­¦|ï­§|ï­¨|ï­©|ïº•|ïº–|ïº—|ïº˜|ðž¸•|ðž¸µ|ðž¹µ|ðžº•|ðžºµ/' => 'Øª',
            '/Ù½|Ù¿|Ý‘|ïº™|ïºš|ïº›|ïºœ|ðž¸–|ðž¸¶|ðž¹¶|ðžº–|ðžº¶/' => 'Ø«',
            '/Úƒ|Ú„|ï­²|ï­³|ï­´|ï­µ|ï­¶|ï­·|ï­¸|ï­¹|ïº|ïºž|ïºŸ|ïº |ðž¸‚|ðž¸¢|ðž¹‚|ðž¹¢|ðžº‚|ðžº¢/' => 'Ø¬',
            '/Ú‡|Ú¿|Ý˜|ï­º|ï­»|ï­¼|ï­½|ï­¾|ï­¿|ï®€|ï®|ðž¸ƒ|ðžºƒ/' => 'Ú†',
            '/Ú|Ý®|Ý¯|Ý²|Ý¼|ïº¡|ïº¢|ïº£|ïº¤|ðž¸‡|ðž¸§|ðž¹‡|ðž¹§|ðžº‡|ðžº§/' => 'Ø­',
            '/Ú‚|Ú…|Ý—|ïº¥|ïº¦|ïº§|ïº¨|ðž¸—|ðž¸·|ðž¹—|ðž¹·|ðžº—|ðžº·/' => 'Ø®',
            '/Úˆ|Ú‰|ÚŠ|ÚŒ|Ú|ÚŽ|Ú|Ú|Ý™|Ýš|ïº©|ïºª|ðžº£|ï®‚|ï®ƒ|ï®ˆ|ï®‰/' => 'Ø¯',
            '/ï±›|ï±|ïº«|ïº¬|ðž¸˜|ðžº˜|ðžº¸|ï®„|ï®…|ï®†|ï®‡|Û®/' => 'Ø°',
            '/Ù«|Ú‘|Ú’|Ú“|Ú”|Ú•|Ú–|Ý›|Ý¬|ï®Œ|ï®|ï±œ|ïº­|ïº®|ðž¸“|ðžº“|ðžº³/' => 'Ø±',
            '/Ú—|Ú™|Ý«|Ý±|ïº¯|ïº°|ðž¸†|ðžº†|ðžº¦/' => 'Ø²',
            '/ï®Š|ï®‹|Ú˜|Û¯/' => 'Ú˜',
            '/Úš|Ý½|Ý¾|ïº±|ïº²|ïº³|ïº´|ðž¸Ž|ðž¸®|ðž¹Ž|ðž¹®|ðžºŽ|ðžº®/' => 'Ø³',
            '/Ú›|Ûº|Ýœ|Ý­|Ý°|ïºµ|ïº¶|ïº·|ïº¸|ðž¸”|ðž¸´|ðž¹”|ðž¹´|ðžº”|ðžº´/' => 'Ø´',
            '/Ú|ïº¹|ïºº|ïº»|ïº¼|ðž¸‘|ðž¹‘|ðž¸±|ðž¹±|ðžº‘|ðžº±/' => 'Øµ',
            '/Úž|Û»|ïº½|ïº¾|ïº¿|ï»€|ðž¸™|ðž¸¹|ðž¹™|ðž¹¹|ðžº™|ðžº¹/' => 'Ø¶',
            '/ï»|ï»‚|ï»ƒ|ï»„|ðž¸ˆ|ðž¹¨|ðžºˆ|ðžº¨/' => 'Ø·',
            '/ÚŸ|ï»…|ï»†|ï»‡|ï»ˆ|ðž¸š|ðž¹º|ðžºš|ðžºº/' => 'Ø¸',
            '/Ø|Ú |ï»‰|ï»Š|ï»‹|ï»Œ|ðž¸|ðž¸¯|ðž¹|ðž¹¯|ðžº|ðžº¯/' => 'Ø¹',
            '/Û¼|Ý|Ýž|ÝŸ|ï»|ï»Ž|ï»|ï»|ðž¸›|ðž¸»|ðž¹›|ðž¹»|ðžº›|ðžº»/' => 'Øº',
            '/Ø‹|Ú¡|Ú¢|Ú£|Ú¤|Ú¥|Ú¦|Ý |Ý¡|ï­ª|ï­«|ï­¬|ï­­|ï­®|ï­¯|ï­°|ï­±|ï»‘|ï»’|ï»“|ï»”|ðž¸|ðž¸ž|ðž¸°|ðž¹°|ðž¹¾|ðžº|ðžº°/' => 'Ù',
            '/Ù¯|Ú§|Ú¨|ï»•|ï»–|ï»—|ï»˜|ðž¸’|ðž¸Ÿ|ðž¸²|ðž¹’|ðž¹Ÿ|ðž¹²|ðžº’|ðžº²|Øˆ/' => 'Ù‚',
            '/Ø»|Ø¼|Ùƒ|Úª|Ú«|Ú¬|Ú­|Ú®|Ý¢|Ý£|Ý¤|Ý¿|ï®Ž|ï®|ï®|ï®‘|ï¯“|ï¯”|ï¯•|ï¯–|ï»™|ï»š|ï»›|ï»œ|ðž¸Š|ðž¸ª|ðž¹ª/' => 'Ú©',
            '/Ú°|Ú±|Ú²|Ú³|Ú´|ï®’|ï®“|ï®”|ï®•|ï®–|ï®—|ï®˜|ï®™|ï®š|ï®›|ï®œ|ï®/' => 'Ú¯',
            '/Úµ|Ú¶|Ú·|Ú¸|Ýª|ï»|ï»ž|ï»Ÿ|ï» |ðž¸‹|ðž¸«|ðž¹‹|ðžº‹|ðžº«/' => 'Ù„',
            '/Û¾|Ý¥|Ý¦|ï»¡|ï»¢|ï»£|ï»¤|ðž¸Œ|ðž¸¬|ðž¹¬|ðžºŒ|ðžº¬/' => 'Ù…',
            '/Ú¹|Úº|Ú»|Ú¼|Ú½|Ý§|Ý¨|Ý©|ï®ž|ï®Ÿ|ï® |ï®¡|ï»¥|ï»¦|ï»§|ï»¨|ðž¸|ðž¸|ðž¸­|ðž¹|ðž¹|ðž¹­|ðžº|ðžº­/' => 'Ù†',
            '/Ø¤|Ù¶|Ù·|Û„|Û…|Û†|Û‡|Ûˆ|Û‰|ÛŠ|Û‹|Û|Ý¸|Ý¹|ï¯—|ï¯˜|ï¯™|ï¯š|ï¯›|ï¯œ|ï¯|ï¯ž|ï¯Ÿ|ï¯ |ï¯¡|ï¯¢|ï¯£|ïº…|ïº†|ï»­|ï»®|ðž¸…|ðžº…|ðžº¥/' => 'Ùˆ',
            '/Ø©|Ú¾|Û€|Û•|Û¿|ï®¤|ï®¥|ï®¦|ï®©|ï®¨|ï®ª|ï®«|ï®¬|ï®­|ïº“|ïº”|ï»©|ï»ª|ï»«|ï»¬|ðž¸¤|ðž¹¤|ðžº„|Ø©/' => 'Ù‡',
            '/Ø |Ø¦|Ø½|Ø¾|Ø¿|Ù‰|ÙŠ|Ù¸|Û|ÛŽ|Û|Û‘|Û’|Û“|Ýµ|Ý¶|Ý·|Ýº|Ý»|ï®¢|ï®£|ï®®|ï®¯|ï®°|ï®±|ï¯¤|ï¯¥|ï¯¦|ï¯§|ï¯¨|ï¯©|ï¯¼|ï¯½|ï¯¾|ï¯¿|ïº‰|ïºŠ|ïº‹|ïºŒ|ï»¯|ï»°|ï»±|ï»²|ï»³|ï»´|ðž¸‰|ðž¸©|ðž¹‰|ðž¹©|ðžº‰|ðžº©/' => 'ÛŒ',
            '/Ù´|Û½|ïº€/' => 'Ø¡',
            '/ï»µ|ï»¶|ï»·|ï»¸|ï»¹|ï»º|ï»»|ï»¼/' => 'Ù„Ø§',
            '/\ØŸ/' => '',
            '/ï·²/' => 'Ø§Ù„Ù„Ù‡',
            '/ï·¼/' => 'Ø±ÛŒØ§Ù„',
            '/ï·³/' => 'Ø§Ú©Ø¨Ø±',
            '/ï·´/' => 'Ù…Ø­Ù…Ø¯',
            '/ï·µ/' => 'ØµÙ„Ø¹Ù…',
            '/ï·¶/' => 'Ø±Ø³ÙˆÙ„',
            '/ï··/' => 'Ø¹Ù„ÛŒÙ‡',
            '/ï·¸/' => 'ÙˆØ³Ù„Ù…',
            '/ï·¹/' => 'ØµÙ„ÛŒ',
            '/ï·º/' => 'ØµÙ„ÛŒ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÛŒÙ‡ ÙˆØ³Ù„Ù…',
            '/ï·»/' => 'Ø¬Ù„ Ø¬Ù„Ø§Ù„Ù‡',
        );

        $quotedReplacement = preg_quote($separator, '/');
        $merge = array(
            '/[^\s\p{Zs}\p{Ll}\p{Lm}\p{Lo}\p{Lt}\p{Lu}\p{Nd}]/mu' => ' ',
            '/[\s\p{Zs}]+/mu' => $separator,
            sprintf('/^[%s]+|[%s]+$/', $quotedReplacement, $quotedReplacement) => '',
        );
        $map = $_transliteration + $merge;
        unset($_transliteration);
        return strtolower(preg_replace(array_keys($map), array_values($map), $string));
    }
}
if (!function_exists('slug_seo')) {
    function slug_seo($string, $separator = '-')
    {
        $_transliteration = array(
            '/Ã¤|Ã¦|Ç½/' => 'ae',
            '/Ã¶|Å“/' => 'oe',
            '/Ã¼/' => 'ue',
            '/Ã„/' => 'Ae',
            '/Ãœ/' => 'Ue',
            '/Ã–/' => 'Oe',
            '/Ã€|Ã|Ã‚|Ãƒ|Ã…|Çº|Ä€|Ä‚|Ä„|Ç/' => 'A',
            '/Ã |Ã¡|Ã¢|Ã£|Ã¥|Ç»|Ä|Äƒ|Ä…|ÇŽ|Âª/' => 'a',
            '/Ã‡|Ä†|Äˆ|ÄŠ|ÄŒ/' => 'C',
            '/Ã§|Ä‡|Ä‰|Ä‹|Ä/' => 'c',
            '/Ã|ÄŽ|Ä/' => 'D',
            '/Ã°|Ä|Ä‘/' => 'd',
            '/Ãˆ|Ã‰|ÃŠ|Ã‹|Ä’|Ä”|Ä–|Ä˜|Äš/' => 'E',
            '/Ã¨|Ã©|Ãª|Ã«|Ä“|Ä•|Ä—|Ä™|Ä›/' => 'e',
            '/Äœ|Äž|Ä |Ä¢/' => 'G',
            '/Ä|ÄŸ|Ä¡|Ä£/' => 'g',
            '/Ä¤|Ä¦/' => 'H',
            '/Ä¥|Ä§/' => 'h',
            '/ÃŒ|Ã|ÃŽ|Ã|Ä¨|Äª|Ä¬|Ç|Ä®|Ä°/' => 'I',
            '/Ã¬|Ã­|Ã®|Ã¯|Ä©|Ä«|Ä­|Ç|Ä¯|Ä±/' => 'i',
            '/Ä´/' => 'J',
            '/Äµ/' => 'j',
            '/Ä¶/' => 'K',
            '/Ä·/' => 'k',
            '/Ä¹|Ä»|Ä½|Ä¿|Å/' => 'L',
            '/Äº|Ä¼|Ä¾|Å€|Å‚/' => 'l',
            '/Ã‘|Åƒ|Å…|Å‡/' => 'N',
            '/Ã±|Å„|Å†|Åˆ|Å‰/' => 'n',
            '/Ã’|Ã“|Ã”|Ã•|ÅŒ|ÅŽ|Ç‘|Å|Æ |Ã˜|Ç¾/' => 'O',
            '/Ã²|Ã³|Ã´|Ãµ|Å|Å|Ç’|Å‘|Æ¡|Ã¸|Ç¿|Âº/' => 'o',
            '/Å”|Å–|Å˜/' => 'R',
            '/Å•|Å—|Å™/' => 'r',
            '/Åš|Åœ|Åž|È˜|Å /' => 'S',
            '/Å›|Å|ÅŸ|È™|Å¡|Å¿/' => 's',
            '/Å¢|Èš|Å¤|Å¦/' => 'T',
            '/Å£|È›|Å¥|Å§/' => 't',
            '/Ã™|Ãš|Ã›|Å¨|Åª|Å¬|Å®|Å°|Å²|Æ¯|Ç“|Ç•|Ç—|Ç™|Ç›/' => 'U',
            '/Ã¹|Ãº|Ã»|Å©|Å«|Å­|Å¯|Å±|Å³|Æ°|Ç”|Ç–|Ç˜|Çš|Çœ/' => 'u',
            '/Ã|Å¸|Å¶/' => 'Y',
            '/Ã½|Ã¿|Å·/' => 'y',
            '/Å´/' => 'W',
            '/Åµ/' => 'w',
            '/Å¹|Å»|Å½/' => 'Z',
            '/Åº|Å¼|Å¾/' => 'z',
            '/Ã†|Ç¼/' => 'AE',
            '/ÃŸ/' => 'ss',
            '/Ä²/' => 'IJ',
            '/Ä³/' => 'ij',
            '/Å’/' => 'OE',
            '/Æ’/' => 'f',
            '/\_/' => '-',
            '/\?|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)/' => '',
            '/\ØŸ/' => '',
        );

        $quotedReplacement = preg_quote($separator, '/');
        $merge = array(
            '/[^\s\p{Zs}\p{Ll}\p{Lm}\p{Lo}\p{Lt}\p{Lu}\p{Nd}]/mu' => ' ',
            '/[\s\p{Zs}]+/mu' => $separator,
            sprintf('/^[%s]+|[%s]+$/', $quotedReplacement, $quotedReplacement) => '',
        );
        $map = $_transliteration + $merge;
        unset($_transliteration);
        return strtolower(preg_replace(array_keys($map), array_values($map), $string));
    }
}

if (!function_exists('original_url')) {
    function original_url($url)
    {
        return env('APP_URL_ORIGINAL', 'http://dadsun.ir') . '/' . $url;
    }
}
